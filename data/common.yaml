---
message: "This node is using common data"

classes:
  - ssh
  - dnsmasq

ssh::storeconfigs_enabled: true
ssh::validate_sshd_file: true
ssh::server_options:
  ListenAddress:
    - '127.0.0.1'
    - '%{trusted.certname}'
  PermitEmptyPasswords: 'no'
  PermitRootLogin: 'no'
  MaxAuthTries: 3
  MaxSessions: 11
  X11Forwarding: 'yes'
  Subsystem: sftp /usr/lib/openssh/sftp-server
  TrustedUserCAKeys: /etc/ssh/ssh_ca.pub


dnsmasq::configs_hash:
  local-dns:
    content:
      - 'no-resolv'
      - 'server=dns.home.arpa'
