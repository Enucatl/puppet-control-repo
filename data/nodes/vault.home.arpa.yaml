---
lookup_options:
  tidy::files:
    merge: deep
  systemd::journald_settings:
    merge: deep
  puppet_configuration::settings:
    merge: deep


classes:
  - tidy

tidy::files:
  puppetserver-reports:
    path: /opt/puppetlabs/server/data/puppetserver/reports
    age: 3w
    max_files: 10000

systemd::journald_settings:
  SystemMaxUse: 100M

ufw::rules:
  allow_vault:
    action: "allow"
    to_ports_app: 8200
  allow_puppetserver:
    action: "allow"
    to_ports_app: 8140

puppet_configuration::settings:
  autosign:
    section: server
    setting: autosign
    value: /etc/puppetlabs/code/environments/production/scripts/autosign.py
