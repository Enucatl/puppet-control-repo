---
classes:
  - vault_secrets::vault_cert
  - tidy
  - docker
  - docker::networks
  - checkmk


tidy::files:
  downloads:
    path: /home/user/Downloads
  screenshots:
    path: /home/user/Pictures/Screenshots


docker::version: latest
docker::ipv6: true
docker::ipv6_cidr: "%{lookup('ipv6-prefix')}:549c::/80"
docker::log_level: info
docker::networks::networks:
  traefik_proxy:
    ensure: present
    driver: bridge
    subnet: '172.28.0.0/16'
    gateway: '172.28.0.1'

promtail::scrape_configs_hash:
  scrape_configs:
    - job_name: docker
      docker_sd_configs:
        - host: unix:///var/run/docker.sock
          refresh_interval: 5s
      relabel_configs:
        - source_labels: 
            - "__meta_docker_container_name"
          regex: "/(.*)"
          target_label: 'container_name'

vault_certs_default_location: /home/user/docker/traefik/data/certs
vault_certs_defaults:
  ensure: 'present'
  vault_uri: 'https://vault.home.arpa:8200/v1/pki_int/issue/home-dot-arpa'
  auth_path: 'cert'
  cert_data:
    ttl: '2160h'  # 90 days
  renewal_threshold: 5
  cert_chain_owner: 'user'
  cert_chain_group: 'user'
  key_owner: 'user'
  key_group: 'user'

vault_certs:
  authelia:
  checkmk:
  duplicati:
  elabftw:
  grafana:
  loki:
  keycloak:
  nuc10i7fnh:
    cert_chain_file: '/home/user/docker/traefik/data/certs/nuc10i7fnh.home.arpa/fullchain.pem'
    key_file: '/home/user/docker/traefik/data/certs/nuc10i7fnh.home.arpa/privkey.pem'
  paperless:
  portainer:
  qbittorrent:
  traefik:
