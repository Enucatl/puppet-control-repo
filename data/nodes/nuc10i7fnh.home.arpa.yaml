---
classes:
  - dns::client
  - vault_secrets::vault_cert


vault_certs:

  traefik:
    ensure: 'present'
    vault_uri: 'https://vault.home.arpa:8200/v1/pki_int/issue/home-dot-arpa'
    auth_path: 'cert'
    cert_data:
      common_name: "traefik.%{trusted.certname}"
      ttl: '2160h'  # 90 days
    renewal_threshold: 5
    ca_chain_file: '/home/user/docker/traefik/data/certs/traefik.chain'
    ca_chain_owner: 'user'
    ca_chain_group: 'user'
    cert_file: '/home/user/docker/traefik/data/certs/traefik.crt'
    cert_owner: 'user'
    cert_group: 'user'
    key_file: '/home/user/docker/traefik/data/certs/traefik.key'
    key_owner: 'user'
    key_group: 'user'

  checkmk:
    ensure: 'present'
    vault_uri: 'https://vault.home.arpa:8200/v1/pki_int/issue/home-dot-arpa'
    auth_path: 'cert'
    cert_data:
      common_name: "checkmk.%{trusted.certname}"
      ttl: '2160h'  # 90 days
    renewal_threshold: 5
    ca_chain_file: '/home/user/docker/traefik/data/certs/checkmk.chain'
    ca_chain_owner: 'user'
    ca_chain_group: 'user'
    cert_file: '/home/user/docker/traefik/data/certs/checkmk.crt'
    cert_owner: 'user'
    cert_group: 'user'
    key_file: '/home/user/docker/traefik/data/certs/checkmk.key'
    key_owner: 'user'
    key_group: 'user'

  portainer:
    ensure: 'present'
    vault_uri: 'https://vault.home.arpa:8200/v1/pki_int/issue/home-dot-arpa'
    auth_path: 'cert'
    cert_data:
      common_name: "portainer.%{trusted.certname}"
      ttl: '2160h'  # 90 days
    renewal_threshold: 5
    ca_chain_file: '/home/user/docker/traefik/data/certs/portainer.chain'
    ca_chain_owner: 'user'
    ca_chain_group: 'user'
    cert_file: '/home/user/docker/traefik/data/certs/portainer.crt'
    cert_owner: 'user'
    cert_group: 'user'
    key_file: '/home/user/docker/traefik/data/certs/portainer.key'
    key_owner: 'user'
    key_group: 'user'

  nuc10i7fnh:
    ensure: 'present'
    vault_uri: 'https://vault.home.arpa:8200/v1/pki_int/issue/home-dot-arpa'
    auth_path: 'cert'
    cert_data:
      common_name: "%{trusted.certname}"
      ttl: '2160h'  # 90 days
    renewal_threshold: 5
    ca_chain_file: '/home/user/docker/traefik/data/certs/nuc10i7fnh.chain'
    ca_chain_owner: 'user'
    ca_chain_group: 'user'
    cert_file: '/home/user/docker/traefik/data/certs/nuc10i7fnh.crt'
    cert_owner: 'user'
    cert_group: 'user'
    key_file: '/home/user/docker/traefik/data/certs/nuc10i7fnh.key'
    key_owner: 'user'
    key_group: 'user'

  paperless:
    ensure: 'present'
    vault_uri: 'https://vault.home.arpa:8200/v1/pki_int/issue/home-dot-arpa'
    auth_path: 'cert'
    cert_data:
      common_name: "paperless.%{trusted.certname}"
      ttl: '2160h'  # 90 days
    renewal_threshold: 5
    ca_chain_file: '/home/user/docker/traefik/data/certs/paperless.chain'
    ca_chain_owner: 'user'
    ca_chain_group: 'user'
    cert_file: '/home/user/docker/traefik/data/certs/paperless.crt'
    cert_owner: 'user'
    cert_group: 'user'
    key_file: '/home/user/docker/traefik/data/certs/paperless.key'
    key_owner: 'user'
    key_group: 'user'

  elabftw:
    ensure: 'present'
    vault_uri: 'https://vault.home.arpa:8200/v1/pki_int/issue/home-dot-arpa'
    auth_path: 'cert'
    cert_data:
      common_name: "elabftw.%{trusted.certname}"
      ttl: '2160h'  # 90 days
    renewal_threshold: 5
    ca_chain_file: '/home/user/docker/traefik/data/certs/elabftw.chain'
    ca_chain_owner: 'user'
    ca_chain_group: 'user'
    cert_file: '/home/user/docker/traefik/data/certs/elabftw.crt'
    cert_owner: 'user'
    cert_group: 'user'
    key_file: '/home/user/docker/traefik/data/certs/elabftw.key'
    key_owner: 'user'
    key_group: 'user'
